
-- Инициализация возрастных рейтингов MPA
MERGE INTO mpa_rating (id, code, description) VALUES
(1, 'G', 'Нет возрастных ограничений'),
(2, 'PG', 'Детям рекомендуется смотреть с родителями'),
(3, 'PG-13', 'Детям до 13 лет просмотр не желателен'),
(4, 'R', 'Лицам до 17 лет только с взрослым'),
(5, 'NC-17', 'Лицам до 18 лет просмотр запрещён');

-- Инициализация жанров
MERGE INTO GENRES (id, name) VALUES
(1, 'Комедия'),
(2, 'Драма'),
(3, 'Мультфильм'),
(4, 'Триллер'),
(5, 'Документальный'),
(6, 'Боевик');

MERGE INTO friendship_status (id, name) VALUES
(1, 'PENDING'),
(2, 'CONFIRMED');

-- Добавление тестовых пользователей
MERGE INTO users (id, email, login, name, birthday) VALUES
(1, 'alex@mail.ru', 'alex88', 'Александр Белов', '1988-03-14'),
(2, 'olga@gmail.com', 'olga_sun', 'Ольга Смирнова', '1993-07-22'),
(3, 'max@yandex.ru', 'maxpower', 'Максим Волков', '1991-11-05'),
(4, 'anna@example.com', 'annet', 'Анна Козлова', '1995-09-30'),
(5, 'dmitry@mail.com', 'dima', 'Дмитрий Соколов', '1987-12-18');

-- Добавление тестовых фильмов
MERGE INTO films (id, name, description, release_date, duration, mpa_rating_id) VALUES
(1, 'Темный рыцарь', 'Бэтмен сражается с хаотичным Джокером', '2008-07-18', 152, 4),
(2, 'Холодное сердце', 'Принцесса Эльза ищет себя в мире магии льда', '2013-11-27', 102, 1),
(3, 'Матрица', 'Хакер узнаёт, что мир — это симуляция', '1999-03-31', 136, 4),
(4, 'Зеленая миля', 'Надзиратель и заключённый с даром исцеления', '1999-12-06', 189, 4),
(5, 'Начало', 'Проникновение в подсознание через сны', '2010-07-08', 148, 3),
(6, 'Достать ножи', 'Детектив расследует смерть писателя-миллионера', '2019-09-07', 130, 3);

-- Назначение жанров фильмам
MERGE INTO FILM_GENRES (film_id, genre_id) VALUES
(1, 6), (1, 4),  -- Крепкий орешек: Боевик, Триллер
(2, 3), (2, 2),  -- Король Лев: Мультфильм, Драма
(3, 1), (3, 5),  -- Назад в будущее: Комедия, Документальный (как пример)
(4, 2), (4, 4),  -- Побег из Шоушенка: Драма, Триллер
(5, 2), (5, 5),  -- Интерстеллар: Драма, Документальный (условно)
(6, 1), (6, 6);  -- Джентельмены: Комедия, Боевик

-- Добавление лайков к фильмам
MERGE INTO FILM_LIKES (film_id, user_id) VALUES
(1, 1), (1, 2), (1, 3),  -- 3 лайка "Крепкий орешек"
(2, 1), (2, 4),           -- 2 лайка "Король Лев"
(3, 2), (3, 3), (3, 5),   -- 3 лайка "Назад в будущее"
(4, 1), (4, 5),           -- 2 лайка "Побег из Шоушенка"
(5, 2), (5, 3), (5, 4), (5, 5),  -- 4 лайка "Интерстеллар"
(6, 1), (6, 3);           -- 2 лайка "Джентельмены"

-- Установление дружеских связей
MERGE INTO friendship (user_id, friend_id, status_id) VALUES
(1, 2, 2),  -- Иван и Мария - подтверждённые друзья
(2, 1, 2),  -- Обратная связь
(1, 3, 1),  -- Иван отправил заявку Алексею (неподтверждённая)
(4, 5, 2),  -- Елена и Дмитрий - подтверждённые друзья
(5, 4, 2),  -- Обратная связь
(2, 4, 1);  -- Мария отправила заявку Елене (неподтверждённая)

-- Сброс sequence для автоинкремента (чтобы новые записи начинались с правильного ID)
ALTER TABLE users ALTER COLUMN id RESTART WITH 16;
ALTER TABLE films ALTER COLUMN id RESTART WITH 17;
